{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://japakosha.org/schemas/manifest.schema.json",
  "title": "JapaKosha Content Manifest",
  "description": "Schema for artifacts/manifest.json â€” the sync contract between content repo, app, and site.",
  "type": "object",
  "required": ["manifestVersion", "contentVersion", "publishedAt", "bundles"],
  "properties": {
    "manifestVersion": {
      "type": "string",
      "description": "Schema version of this manifest format. Currently '1'."
    },
    "contentVersion": {
      "type": "string",
      "pattern": "^\\d{4}\\.\\d{2}\\.\\d{2}\\.\\d+$",
      "description": "Content version in YYYY.MM.DD.N format (e.g., '2024.06.15.1')."
    },
    "publishedAt": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when this manifest was generated."
    },
    "minAppVersion": {
      "type": "string",
      "description": "Minimum app version required to consume these bundles. Optional."
    },
    "bundles": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["name", "path", "sha256"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Bundle identifier: 'categories', 'mantras-full', or 'mantras-delta'."
          },
          "path": {
            "type": "string",
            "description": "Relative path to bundle file from manifest location (e.g., 'bundles/categories.json')."
          },
          "sha256": {
            "type": "string",
            "pattern": "^[a-f0-9]{64}$",
            "description": "SHA-256 hex digest of the bundle file."
          },
          "sizeBytes": {
            "type": "integer",
            "minimum": 0,
            "description": "File size in bytes."
          },
          "deltaFrom": {
            "type": "string",
            "description": "If this is a delta bundle, the contentVersion it diffs from."
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}
